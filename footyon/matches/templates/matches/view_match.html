{% extends 'base.html' %}

{% block title %}Match Details{% endblock %}

{% block content %}
<h2 class="mb-4">Match Details</h2>

<ul class="list-group mb-4">
    <li class="list-group-item"><strong>Date:</strong> {{ match.date }}</li>
    <li class="list-group-item"><strong>Day:</strong> {{ match.day_of_week }}</li>
    <li class="list-group-item"><strong>Time:</strong> {{ match.time }}</li>
    <li class="list-group-item"><strong>Location:</strong> {{ match.location_name }}</li>
    <li class="list-group-item"><strong>Max Players:</strong> {{ match.max_players }}</li>
    <li class="list-group-item"><strong>Spots Left:</strong> {{ match.spots_left }}</li>
</ul>

<h3 class="mb-3">Participants</h3>
<table class="table table-striped mb-4">
    <thead>
        <tr>
            <th>Username</th>
            <th>Status</th>
            <th>No-show</th>
        </tr>
    </thead>
    <tbody>
        {% for p in participants %}
            <tr>
                <td>{{ p.user.username }}</td>
                <td>{{ p.status }}</td>
                <td>
                    {% if p.is_no_show %}
                        Yes ({{ p.no_show_reason }})
                    {% else %}
                        No
                    {% endif %}
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="3" class="text-center">No participants yet.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{% if match.location_google_maps_embed_url %}
<div class="d-flex justify-content-center my-4" style="height: 400px;">
    <div style="width: 100%; max-width: 800px; height: 100%;">
        {{ match.location_google_maps_embed_url|safe }}
    </div>
</div>
{% endif %}

<div class="text-center mt-5">
    <a href="{{ previous_url|default:'/' }}" class="btn btn-secondary">Back</a>
</div>

{% endblock %}
