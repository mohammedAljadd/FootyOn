{% extends 'base.html' %}
{% load i18n %}
{% block title %}{% trans "Manage Matches" %}{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="h3 mb-4">{% trans "Manage Matches" %}</h2>
    </div>
</div>

<!-- Create New Match -->
<div class="row mb-4">
    <div class="col-12">
        <a href="{% url 'matches:create_match' %}" class="btn btn-success btn-lg">
            <i class="bi bi-plus-circle me-2"></i> {% trans "Create New Match" %}
        </a>
    </div>
</div>

<!-- Matches Table -->
<div class="row">
    <div class="col-12">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>{% trans "Date" %}</th>
                        <th>{% trans "Day" %}</th>
                        <th>{% trans "Time" %}</th>
                        <th>{% trans "Location" %}</th>
                        <th>{% trans "Max Players" %}</th>
                        <th>{% trans "Spots Left" %}</th>
                        <th>{% trans "Actions" %}</th>
                    </tr>
                </thead>
                <tbody>
                    {% for match in matches %}
                        <tr>
                            <td data-label="Date">{{ match.date|date:"Y-m-d"  }}</td>
                            <td data-label="Day">{% trans match.day_of_week|capfirst %}</td>
                            <td data-label="Time">{{ match.time|date:"H:i"  }}</td>
                            <td data-label="Location">{{ match.location_name }}</td>
                            <td data-label="Max Players">{{ match.max_players }}</td>
                            <td data-label="Spots Left">{{ match.spots_left }}</td>
                            <td data-label="Actions">
                                {% if match.is_past %}
                                    <!-- Past match: view only -->
                                    <a href="{% url 'matches:view_match' match.id %}" class="btn btn-primary btn-sm mb-1">
                                        <i class="bi bi-eye me-1"></i> View
                                    </a>
                                {% else %}
                                    <!-- Upcoming match: view / modify / delete -->
                                    <a href="{% url 'matches:view_match' match.id %}" class="btn btn-primary btn-sm mb-1">
                                        <i class="bi bi-eye me-1"></i> View
                                    </a>
                                    <a href="{% url 'matches:edit_match' match.id %}" class="btn btn-warning btn-sm mb-1">
                                        <i class="bi bi-pencil-square me-1"></i> Edit
                                    </a>
                                    <a href="{% url 'matches:delete_match' match.id %}" class="btn btn-danger btn-sm mb-1">
                                        <i class="bi bi-trash me-1"></i> Delete
                                    </a>
                                    {%if match.is_full %}
                                        <button class="btn btn-secondary btn-sm mb-1" disabled>Full</button>
                                    {% endif %}

                                {% endif %}
                            </td>
                        </tr>
                    {% empty %}
                        <tr>
                            <td colspan="7" class="text-center">No matches found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<style>
    /* Mobile-specific table styles */
    @media (max-width: 768px) {
        .table-responsive {
            border: none;
        }
        
        .table th,
        .table td {
            padding: 0.5rem 0.25rem;
            font-size: 0.9rem;
        }
        
        .table th {
            font-size: 0.8rem;
        }
        
        .btn-sm {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
        
        /* Stack action buttons vertically on mobile */
        .btn {
            display: block;
            width: 100%;
            margin-bottom: 0.25rem;
        }
        
        .btn:last-child {
            margin-bottom: 0;
        }
    }
    
    @media (max-width: 576px) {
        .btn-lg {
            width: 100%;
            padding: 0.75rem 1rem;
        }
        
        .table th,
        .table td {
            padding: 0.4rem 0.2rem;
            font-size: 0.85rem;
        }
    }
</style>

{% endblock %}
